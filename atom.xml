<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CR.MO`s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://crmo.github.io/"/>
  <updated>2018-03-03T09:59:26.104Z</updated>
  <id>http://crmo.github.io/</id>
  
  <author>
    <name>CR.MO</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOSç”¨CallKitå®ç°æ¥ç”µè¯†åˆ«ã€æ¥ç”µæ‹¦æˆª</title>
    <link href="http://crmo.github.io/2018/03/03/iOS%E7%94%A8CallKit%E5%AE%9E%E7%8E%B0%E6%9D%A5%E7%94%B5%E8%AF%86%E5%88%AB&amp;%E6%9D%A5%E7%94%B5%E6%8B%A6%E6%88%AA/"/>
    <id>http://crmo.github.io/2018/03/03/iOSç”¨CallKitå®ç°æ¥ç”µè¯†åˆ«&amp;æ¥ç”µæ‹¦æˆª/</id>
    <published>2018-03-03T09:33:54.000Z</published>
    <updated>2018-03-03T09:59:26.104Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>æœ€è¿‘éœ€è¦å®ç°ä¸€ä¸ªæ–°éœ€æ±‚ï¼Œç”¨iOS 10å‡ºçš„CallKitå®ç°å°†APPçš„é€šè®¯å½•çš„ä¿¡æ¯åŒæ­¥åˆ°ç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä¸æŠŠäººå‘˜ä¿¡æ¯åŠ åˆ°é€šè®¯å½•ä¸­ï¼Œå®ç°æ¥ç”µå·ç è¯†åˆ«ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨xxå®‰å…¨å«å£«ã€xxç®¡å®¶ä¸­å¾ˆæ—©å°±å®ç°äº†ï¼Œä½†æ˜¯ç½‘ä¸Šç›¸å…³çš„èµ„æ–™è¾ƒå°‘ï¼Œè€Œä¸”å®˜æ–¹çš„æ–‡æ¡£å†™çš„å¤ªç®€å•äº†ï¼Œå¾ˆå¤šå‘è¿˜è¦è‡ªå·±å»æ‘¸ç´¢ã€‚äºæ˜¯è®°å½•ä¸€ä¸‹å’Œå„ä½åˆ†äº«ï¼Œå¦‚æœ‰é”™è¯¯ä¹‹å¤„è¯·å„ä½æŒ‡å‡ºï¼</p></blockquote><p>PS: å…ˆè¯´ä¸ªé¢˜å¤–è¯å§ï¼ŒCallKitåŠŸèƒ½åœ¨iOS 10çš„æ—¶å€™è¿˜ä¸å¤ªç¨³å®šï¼ŒiOS 10åˆšå‡ºæ¥çš„æ—¶å€™ä¸ºäº†ä½“éªŒéªšæ‰°æ‹¦æˆªåŠŸèƒ½ï¼Œæ‰‹è´±è£…äº†ä¸¤ä¸ªä¸åŒçš„æ‹¦æˆªAPPï¼Œç„¶åå°±æ‚²å‰§äº†ã€‚ç›—ä¸€å¼ ç½‘ä¸Šçš„å›¾ï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/2665383-e1a2d7ab18506810.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1.png"></p><p>ç„¶åå„ç§é‡å¯ã€é‡è£…APPéƒ½æ²¡æœ‰ç”¨ï¼Œå†™çš„Demoä¹Ÿè·‘ä¸èµ·æ¥ï¼Œå”¯ä¸€çš„åŠæ³•åªæœ‰é‡ç½®ç³»ç»Ÿã€‚è¯´å¤šäº†éƒ½æ˜¯æ³ªï¼</p><blockquote><p>æœ¬æ–‡æ¶‰åŠçš„<a href="https://github.com/crmo/CRCallDirectoryDemo" target="_blank" rel="noopener">Demo</a>ã€‚</p></blockquote><h2 id="ä¸€ã€Call-Directory-app-extension"><a href="#ä¸€ã€Call-Directory-app-extension" class="headerlink" title="ä¸€ã€Call Directory app extension"></a>ä¸€ã€Call Directory app extension</h2><p>å®ç°æ¥ç”µè¯†åˆ«ã€æ¥ç”µæ‹¦æˆªåŠŸèƒ½éœ€è¦ä½¿ç”¨CallKitå½“ä¸­çš„<code>Call Directory app extension</code>ï¼Œé¦–å…ˆï¼Œéœ€è¦äº†è§£extensionã€‚å…³äºextensionç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸ç»†è¯´äº†ã€‚æ¨èä¸¤ç¯‡æ–‡ç« ï¼Œè‹±æ–‡å¥½çš„æ¨èçœ‹<a href="https://developer.apple.com/library/content/documentation/General/Conceptual/ExtensibilityPG/index.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>ï¼Œè¿˜æœ‰ä¸€ç¯‡<a href="http://foggry.com/blog/2014/06/23/wwdc2014zhi-app-extensionsxue-xi-bi-ji/" target="_blank" rel="noopener">ä¸­æ–‡åšå®¢</a>ã€‚</p><p>ä½¿ç”¨Call Directory Extensionä¸»è¦éœ€è¦å’Œ3ä¸ªç±»æ‰“äº¤é“ï¼Œåˆ†åˆ«æ˜¯<br><code>CXCallDirectoryProvider</code>ã€<code>CXCallDirectoryExtensionContext</code>ã€<code>CXCallDirectoryManager</code>ã€‚</p><p><img src="http://upload-images.jianshu.io/upload_images/2665383-c7c5d8e8809480bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2.png"></p><h3 id="CXCallDirectoryProvider"><a href="#CXCallDirectoryProvider" class="headerlink" title="CXCallDirectoryProvider"></a>CXCallDirectoryProvider</h3><blockquote><p>å®˜æ–¹æ–‡æ¡£ï¼šThe principal object for a Call Directory app extension for a host app.</p></blockquote><p>æ­£å¦‚å®˜æ–¹æ–‡æ¡£æ‰€è¯´ï¼Œè¿™æ˜¯Call Directory app extensionæœ€é‡è¦çš„ä¸€ä¸ªç±»ã€‚<br>ç”¨ç³»ç»Ÿæ¨¡æ¿æ–°å»ºCall Directory Extensionä¹‹åä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªç±»ï¼Œç»§æ‰¿è‡ª<code>CXCallDirectoryProvider</code>ã€‚å…¥å£æ–¹æ³•ï¼š<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ‰ä¸¤ç§æƒ…å†µæ”¹æ–¹æ³•ä¼šè¢«è°ƒç”¨</span></span><br><span class="line"><span class="comment">// 1.ç¬¬ä¸€æ¬¡æ‰“å¼€è®¾ç½®-ç”µè¯-æ¥ç”µé˜»æ­¢ä¸èº«ä»½è¯†åˆ«å¼€å…³æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨</span></span><br><span class="line"><span class="comment">// 2.è°ƒç”¨CXCallDirectoryManagerçš„reloadExtensionWithIdentifieræ–¹æ³•ä¼šè°ƒç”¨</span></span><br><span class="line">- (<span class="keyword">void</span>)beginRequestWithExtensionContext:(CXCallDirectoryExtensionContext *)context &#123;</span><br><span class="line">    context.delegate = <span class="keyword">self</span>;</span><br><span class="line">    <span class="comment">// æ·»åŠ å·ç è¯†åˆ«ä¿¡æ¯ä¸å·ç æ‹¦æˆªåˆ—è¡¨</span></span><br><span class="line">    [<span class="keyword">self</span> addIdentificationPhoneNumbersToContext:context];</span><br><span class="line">    [context completeRequestWithCompletionHandler:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="CXCallDirectoryExtensionContext"><a href="#CXCallDirectoryExtensionContext" class="headerlink" title="CXCallDirectoryExtensionContext"></a>CXCallDirectoryExtensionContext</h3><blockquote><p>å®˜æ–¹æ–‡æ¡£ï¼šA programmatic interface for adding identification and blocking entries to a Call Directory app extension.<br>CXCallDirectoryExtensionContext objects are not initialized directly, but are instead passed as arguments to the CXCallDirectoryProvider instance method beginRequestWithExtensionContext:.</p></blockquote><p>å¤§è‡´æ„æ€å°±æ˜¯è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ºCall Directory app extensionæ·»åŠ å·ç è¯†åˆ«ã€å·ç æ‹¦æˆªçš„å…¥å£ã€‚<code>CXCallDirectoryExtensionContext</code>ä¸éœ€è¦è‡ªå·±åˆå§‹åŒ–ï¼Œå®ƒä¼šä½œä¸º<code>CXCallDirectoryProvider</code>çš„<code>beginRequestWithExtensionContext</code>å‡½æ•°çš„å‚æ•°ä¼ é€’ç»™ä½¿ç”¨è€…ã€‚<br>å®ƒçš„ä¸»è¦æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®å·ç è¯†åˆ«ä¿¡æ¯</span></span><br><span class="line">- (<span class="keyword">void</span>)addIdentificationEntryWithNextSequentialPhoneNumber:(CXCallDirectoryPhoneNumber)phoneNumber label:(<span class="built_in">NSString</span> *)label;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å·ç æ‹¦æˆªåˆ—è¡¨</span></span><br><span class="line">- (<span class="keyword">void</span>)addBlockingEntryWithNextSequentialPhoneNumber:(CXCallDirectoryPhoneNumber)phoneNumber;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨è®¾ç½®æ—¶å€™è¦æ³¨æ„ï¼š</p><ol><li>å·ç ä¸èƒ½é‡å¤ï¼Œä¸ç„¶ä¼šæŠ¥é”™<code>CXErrorCodeCallDirectoryManagerErrorDuplicateEntries</code></li><li>å·ç å¿…é¡»æŒ‰ç…§å‡åºå†™å…¥ï¼Œä¸ç„¶ä¼šæŠ¥é”™<code>CXErrorCodeCallDirectoryManagerErrorEntriesOutOfOrder</code></li><li>å·ç å¿…é¡»æ ¼å¼åŒ–åä¼ å…¥ï¼Œæ‰‹æœºå·ç å¿…é¡»åŠ ä¸Šå›½å®¶ç ï¼Œä¾‹å¦‚18012341234å°±ä¸è¡Œï¼Œéœ€è¦åŠ ä¸Š86ï¼Œæ„é€ æˆ8618012341234ï¼›å›ºè¯éœ€è¦æ ¼å¼ä¸ºï¼šå›½å®¶ç +åŒºå·ï¼ˆå»æ‰ç¬¬ä¸€ä¸ª0ï¼‰+å·ç ï¼Œä¾‹å¦‚010-61001234æ ¼å¼åŒ–ä¹‹åä¸ºï¼Œ861061001234ã€‚å¦‚æœå·ç æ ¼å¼é”™è¯¯ï¼Œä¼šå¯¼è‡´è¯†åˆ«ä¸å‡ºæ¥ã€‚</li><li>ä¸Šé™æ•°æ®æ˜¯200ä¸‡ï¼ˆåœ¨å…¶å®ƒæ–‡ç« é‡Œçœ‹åˆ°çš„ï¼Œç„¶åè‡ªå·±æµ‹è¯•äº†ä¸‹ï¼Œæ„é€ äº†200ä¸‡æ¡æ•°æ®å†™å…¥çš„æ—¶å€™ä¼šæŠ¥é”™<code>CXErrorCodeCallDirectoryManagerErrorMaximumEntriesExceeded</code>ï¼Œ150ä¸‡æ¡æ•°æ®æ˜¯OKçš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ•°æ®ä¸Šé™ä¸€å®šè¦æ³¨æ„ã€‚å®æµ‹å®‰è£…äº†XXå®‰å…¨å«å£«ã€XXç®¡å®¶å®ç°éªšæ‰°ç”µè¯æ‹¦æˆªç”¨äº†3ä¸ªextensionï¼Œå¯èƒ½æ•°æ®é‡å¤ªå¤§å°±æ˜¯ä¸€ä¸ªåŸå› ã€‚ï¼‰</li><li>åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡æ‰“å¼€è®¾ç½®æ—¶ï¼Œä¼šè°ƒç”¨<code>beginRequestWithExtensionContext</code>ï¼Œè¿™æ—¶å€™ä¸å®œå†™å¤ªå¤šæ•°æ®ï¼Œä¸ç„¶ä¼šå¡åœ¨è®¾ç½®é‚£é‡Œè½¬åœˆï¼Œç”¨æˆ·ä½“éªŒå¾ˆå·®ã€‚å¯ä»¥å…ˆå†™éƒ¨åˆ†æ•°æ®ï¼Œç„¶åå›åˆ°ä¸»APPäº†è°ƒç”¨<code>reloadExtensionWithIdentifier</code>å»åˆ·æ–°ã€‚</li></ol></blockquote><h3 id="CXCallDirectoryManager"><a href="#CXCallDirectoryManager" class="headerlink" title="CXCallDirectoryManager"></a>CXCallDirectoryManager</h3><blockquote><p>å®˜æ–¹æ–‡æ¡£ï¼šThe programmatic interface to an object that manages a Call Directory app extension.</p></blockquote><p><code>CXCallDirectoryManager</code>ä¸»è¦ä½œç”¨æ˜¯ç®¡ç†Call Directory app extensionã€‚<br>æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡æ–°è®¾ç½®å·ç è¯†åˆ«ã€ç”µè¯æ‹¦æˆªåˆ—è¡¨</span></span><br><span class="line"><span class="comment">// è°ƒç”¨è¯¥æ–¹æ³•åä¼šé‡ç½®ä¹‹å‰è®¾ç½®çš„åˆ—è¡¨ï¼Œç„¶åè°ƒç”¨beginRequestWithExtensionContext:</span></span><br><span class="line">- (<span class="keyword">void</span>)reloadExtensionWithIdentifier:(<span class="built_in">NSString</span> *)identifier completionHandler:(<span class="keyword">nullable</span> <span class="keyword">void</span> (^)(<span class="built_in">NSError</span> *_Nullable error))completion;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–extensionæ˜¯å¦å¯ç”¨ï¼Œéœ€è¦åœ¨â€œè®¾ç½®-ç”µè¯-æ¥ç”µé˜»æ­¢ä¸èº«ä»½è¯†åˆ«"ä¸­å¼€å¯æƒé™</span></span><br><span class="line">- (<span class="keyword">void</span>)getEnabledStatusForExtensionWithIdentifier:(<span class="built_in">NSString</span> *)identifier completionHandler:(<span class="keyword">void</span> (^)(CXCallDirectoryEnabledStatus enabledStatus, <span class="built_in">NSError</span> *_Nullable error))completion;</span><br></pre></td></tr></table></figure><h2 id="äºŒã€å®æˆ˜"><a href="#äºŒã€å®æˆ˜" class="headerlink" title="äºŒã€å®æˆ˜"></a>äºŒã€å®æˆ˜</h2><blockquote><p>å…ˆä¸Š<a href="https://github.com/crmo/CRCallDirectoryDemo" target="_blank" rel="noopener">Demoåœ°å€</a>ã€‚ä¸‹é¢ä¼šä¸€æ­¥æ­¥è®²è§£ã€‚</p></blockquote><h3 id="åˆ›å»ºextension"><a href="#åˆ›å»ºextension" class="headerlink" title="åˆ›å»ºextension"></a>åˆ›å»ºextension</h3><p>æ–°å»ºä¸€ä¸ªTargetï¼ˆFile-New-Targetï¼‰ã€‚</p><p><img src="http://upload-images.jianshu.io/upload_images/2665383-bb94a974d77e4e75.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="3.png"></p><p>ä¼šè‡ªåŠ¨å»ºç«‹ä¸€ä¸ªç›®å½•ï¼Œé»˜è®¤æœ‰ä¸‰ä¸ªæ–‡ä»¶ã€‚åœ¨.mæ–‡ä»¶ä¸­æœ‰ç³»ç»Ÿç»™å‡ºçš„ç¤ºä¾‹ä»£ç </p><p><img src="http://upload-images.jianshu.io/upload_images/2665383-6a832bc0e0f65e67.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="4.png"></p><p>æˆ‘ä»¬æ¥çœ‹çœ‹ç³»ç»Ÿçš„æ¨¡æ¿ä»£ç ï¼Œé¦–å…ˆæ˜¯å…¥å£å‡½æ•°</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)beginRequestWithExtensionContext:(CXCallDirectoryExtensionContext *)context &#123;</span><br><span class="line">    context.delegate = <span class="keyword">self</span>;</span><br><span class="line">    <span class="keyword">if</span> (context.isIncremental) &#123;</span><br><span class="line">        [<span class="keyword">self</span> addOrRemoveIncrementalBlockingPhoneNumbersToContext:context];</span><br><span class="line"></span><br><span class="line">        [<span class="keyword">self</span> addOrRemoveIncrementalIdentificationPhoneNumbersToContext:context];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        [<span class="keyword">self</span> addAllBlockingPhoneNumbersToContext:context];</span><br><span class="line"></span><br><span class="line">        [<span class="keyword">self</span> addAllIdentificationPhoneNumbersToContext:context];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [context completeRequestWithCompletionHandler:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CallDirectoryHandler"><a href="#CallDirectoryHandler" class="headerlink" title="CallDirectoryHandler"></a>CallDirectoryHandler</h3><p>æˆ‘åœ¨Xcode 9ç”Ÿæˆçš„ä»£ç ï¼Œ<code>context.isIncremental</code>æ˜¯iOS 11æ‰å¢åŠ çš„ï¼Œè¿˜æœ‰æ‰€æœ‰çš„removeçš„æ–¹æ³•ä¹Ÿæ˜¯iOS 11æ‰æœ‰çš„ï¼Œä¸ºäº†é€‚é…iOS 10ï¼Œè¿˜æ˜¯ä¸æ¨èä½¿ç”¨ã€‚<br>ç³»ç»Ÿæ¨¡æ¿ä»£ç å¤§è‡´é€»è¾‘å°±æ˜¯ï¼Œå…ˆæ·»åŠ å·ç è¯†åˆ«ã€å·ç æ‹¦æˆªè®°å½•ï¼Œæ·»åŠ å®Œæˆåè°ƒç”¨<code>completeRequestWithCompletionHandler:</code>å®Œæˆæ•´ä¸ªè¿‡ç¨‹ã€‚<br>ç”±äºå·ç æ‹¦æˆªæ¯”è¾ƒç®€å•ï¼Œåªæ˜¯å†™å…¥ä¸€ä¸ªå·ç çš„æ•°ç»„ï¼Œæœ¬æ–‡å°±ä»¥å·ç è¯†åˆ«ä¸ºä¾‹ï¼Œå·ç è¯†åˆ«æ–¹æ³•ç³»ç»Ÿæ¨¡æ¿è¿™ä¹ˆå†™çš„ï¼š<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)addAllIdentificationPhoneNumbersToContext:(CXCallDirectoryExtensionContext *)context &#123;</span><br><span class="line">    CXCallDirectoryPhoneNumber allPhoneNumbers[] = &#123; <span class="number">8618788888888</span>, <span class="number">8618885555555</span> &#125;;</span><br><span class="line">    <span class="built_in">NSArray</span>&lt;<span class="built_in">NSString</span> *&gt; *labels = @[ <span class="string">@"é€é¤ç”µè¯"</span>, <span class="string">@"è¯ˆéª—ç”µè¯"</span> ];</span><br><span class="line">    <span class="built_in">NSUInteger</span> count = (<span class="keyword">sizeof</span>(allPhoneNumbers) / <span class="keyword">sizeof</span>(CXCallDirectoryPhoneNumber));</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSUInteger</span> i = <span class="number">0</span>; i &lt; count; i += <span class="number">1</span>) &#123;</span><br><span class="line">        CXCallDirectoryPhoneNumber phoneNumber = allPhoneNumbers[i];</span><br><span class="line">        <span class="built_in">NSString</span> *label = labels[i];</span><br><span class="line">        [context addIdentificationEntryWithNextSequentialPhoneNumber:phoneNumber label:label];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™ä¹ˆå¤šä»£ç ï¼Œæ ¸å¿ƒå°±æ˜¯ä¸€è¡Œ<code>[context addIdentificationEntryWithNextSequentialPhoneNumber:phoneNumber label:label];</code>,æ³¨æ„phoneNumberæ˜¯<code>CXCallDirectoryPhoneNumber</code>ç±»å‹ï¼Œå…¶å®å°±æ˜¯<code>long long</code>ç±»å‹ã€‚<br>åœ¨è¿™ä¸ªå‡½æ•°é‡Œï¼Œéœ€è¦æŠŠéœ€è¦è¯†åˆ«çš„å·ç å’Œè¯†åˆ«ä¿¡æ¯ï¼Œä¸€æ¡ä¸€æ¡çš„å†™å…¥</p><h3 id="æ£€æŸ¥æˆæƒ"><a href="#æ£€æŸ¥æˆæƒ" class="headerlink" title="æ£€æŸ¥æˆæƒ"></a>æ£€æŸ¥æˆæƒ</h3><p>å¼€å¯extensionåŠŸèƒ½éœ€è¦åœ¨â€œè®¾ç½®-ç”µè¯-æ¥ç”µé˜»æ­¢ä¸èº«ä»½è¯†åˆ«â€ä¸­å¼€å¯ï¼Œæˆ‘ä»¬åœ¨å†™å…¥æ•°æ®æ—¶ç¬¬ä¸€æ­¥æ˜¯å¼•å¯¼ç”¨æˆ·ç»™æˆ‘ä»¬çš„extensionæˆæƒã€‚<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> CXCallDirectoryManager *manager = [CXCallDirectoryManager sharedInstance];</span><br><span class="line"> [manage</span><br><span class="line">  getEnabledStatusForExtensionWithIdentifier:<span class="keyword">self</span>.externsionIdentifier</span><br><span class="line">  completionHandler:^(CXCallDirectoryEnabledStatus enabledStatus, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">      <span class="comment">// æ ¹æ®errorï¼ŒenabledStatusåˆ¤æ–­æˆæƒæƒ…å†µ</span></span><br><span class="line"><span class="comment">// error == nil &amp;&amp; enabledStatus == CXCallDirectoryEnabledStatusEnabled è¯´æ˜å¯ç”¨</span></span><br><span class="line"><span class="comment">// error è§ CXErrorCodeCallDirectoryManagerError</span></span><br><span class="line"><span class="comment">// enabledStatus è§ CXCallDirectoryEnabledStatus</span></span><br><span class="line">  &#125;];</span><br></pre></td></tr></table></figure></p><h3 id="å†™å…¥æ•°æ®"><a href="#å†™å…¥æ•°æ®" class="headerlink" title="å†™å…¥æ•°æ®"></a>å†™å…¥æ•°æ®</h3><p>ç”¨æˆ·åœ¨è®¾ç½®å¼€å¯åï¼Œè°ƒç”¨<code>reloadExtensionWithIdentifier</code>å³å¯è§¦å‘<code>CallDirectoryHandler</code>æ›´æ–°æ•°æ®é€»è¾‘ã€‚</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CXCallDirectoryManager *manager = [CXCallDirectoryManager sharedInstance];</span><br><span class="line">[manager reloadExtensionWithIdentifier:<span class="keyword">self</span>.externsionIdentifier completionHandler:^(<span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">    <span class="comment">// error è§ CXErrorCodeCallDirectoryManagerError</span></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><p>æ¥ä¸‹æ¥åœ¨çœŸæœºä¸‹è·‘ä¸‹ï¼ˆä¸€å®šè¦åœ¨æ’äº†ç”µè¯å¡çš„iPhoneä¸Šè°ƒè¯•ï¼Œæ¨¡æ‹Ÿå™¨ä¸è¡Œï¼ï¼‰ï¼Œå†™å…¥æˆåŠŸåï¼Œæ‰“å¼€ç”µè¯ï¼Œæ‹¨å·18788888888ï¼Œæç¤ºâ€é€é¤ç”µè¯â€ã€‚è¯´æ˜å†™å…¥æˆåŠŸï¼</p><p><img src="http://upload-images.jianshu.io/upload_images/2665383-2261a7358b0a6964.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5.png"></p><h2 id="ä¸‰ã€extensionå’Œcontaining-appæ•°æ®å…±äº«"><a href="#ä¸‰ã€extensionå’Œcontaining-appæ•°æ®å…±äº«" class="headerlink" title="ä¸‰ã€extensionå’Œcontaining appæ•°æ®å…±äº«"></a>ä¸‰ã€extensionå’Œcontaining appæ•°æ®å…±äº«</h2><p>ä¸Šé¢çš„æ­¥éª¤ä¸­ï¼Œå·ç ä¿¡æ¯æ˜¯å†™æ­»åœ¨ä»£ç ä¸­çš„ï¼Œåœ¨å®é™…åº”ç”¨ä¸­è¿™äº›å·ç ä¿¡æ¯è‚¯å®šä¸æ˜¯å†™æ­»çš„ï¼Œä¸€èˆ¬éœ€è¦ä»æœåŠ¡å™¨è·å–ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬çš„APPä¸extensionè¿›è¡Œé€šä¿¡ï¼Œéœ€è¦ç”¨åˆ°APP Groupsï¼Œæ€ä¹ˆç”¨ç½‘ä¸Šæœ‰å¾ˆå¤šæ–‡ç« äº†ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ï¼Œ<a href="http://foggry.com/blog/2014/06/23/wwdc2014zhi-app-extensionsxue-xi-bi-ji/" target="_blank" rel="noopener">æ¨èä¸€ç¯‡</a>ã€‚<br>å…¶å®æœ¬è´¨å°±æ˜¯é€šè¿‡<code>APP Groups</code>ï¼Œå¼€è¾Ÿä¸€ç‰‡ç©ºé—´ï¼Œextensionå’Œcontaining appéƒ½å¯ä»¥è®¿é—®ï¼Œç„¶åæˆ‘ä»¬çš„APPå°±å¯ä»¥é€šè¿‡NSUserDefaultsã€æ–‡ä»¶ã€æ•°æ®åº“ç­‰æ–¹å¼å…±äº«æ•°æ®ç»™extensionäº†ã€‚å‰æœŸæˆ‘ä½¿ç”¨è¿‡NSUserDefaultsï¼Œæ•ˆç‡å¾ˆä½ï¼Œå¤§æ¦‚åœ¨5ä¸‡æ•°æ®çš„æ—¶å€™å°±çˆ†å†…å­˜äº†ï¼Œä½¿ç”¨extensionä¸€å®šè¦æ³¨æ„å†…å­˜ï¼Œä¸ç„¶å¾ˆå®¹æ˜“è¢«ç³»ç»Ÿå¹²æ‰ï¼Œæ‰€ä»¥ä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ã€‚<br>Demoä¸­é‡‡ç”¨çš„æ˜¯è¯»å†™æ–‡ä»¶çš„æ–¹å¼ï¼Œå¤§è‡´æ€è·¯ï¼ˆ<code>å…·ä½“å®ç°çœ‹Demo</code>ï¼‰ï¼š</p><ol><li>åœ¨APPä¸­æŠŠæ•°æ®åºåˆ—åŒ–ä¹‹åå†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</li><li>åœ¨extensionä¸­è¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œè¯»å–ä¸€è¡Œï¼Œè°ƒç”¨ä¸€æ¬¡<code>addIdentificationEntryWithNextSequentialPhoneNumber</code>ï¼Œç„¶ååŠæ—¶é‡Šæ”¾<br>è¿™ç§æ–¹å¼ç†è®ºä¸Šæ˜¯å¯ä»¥è¾¾åˆ°æœ€å¤§é™åˆ¶200wæ¡çš„ï¼ˆå®é™…æµ‹è¯•150ä¸‡æ²¡æœ‰é—®é¢˜ï¼‰ã€‚</li></ol><h3 id="è·å–APP-Groupsæ–‡ä»¶è·¯å¾„"><a href="#è·å–APP-Groupsæ–‡ä»¶è·¯å¾„" class="headerlink" title="è·å–APP Groupsæ–‡ä»¶è·¯å¾„"></a>è·å–APP Groupsæ–‡ä»¶è·¯å¾„</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSFileManager</span> *fileManager = [<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line">    <span class="built_in">NSURL</span> *containerURL = [[<span class="built_in">NSFileManager</span> defaultManager] containerURLForSecurityApplicationGroupIdentifier:<span class="keyword">self</span>.groupIdentifier];</span><br><span class="line">    containerURL = [containerURL URLByAppendingPathComponent:<span class="string">@"CallDirectoryData"</span>];</span><br><span class="line">    <span class="built_in">NSString</span>* filePath = containerURL.path;</span><br></pre></td></tr></table></figure><h3 id="è¿›åº¦ç›‘æ§"><a href="#è¿›åº¦ç›‘æ§" class="headerlink" title="è¿›åº¦ç›‘æ§"></a>è¿›åº¦ç›‘æ§</h3><p>åœ¨xxå®‰å…¨å«å£«ä¸­ï¼Œå¼€å¯éªšæ‰°ç”µè¯æ‹¦æˆªåŠŸèƒ½æœ‰ä¸€ä¸ªè¿›åº¦æ¡ï¼Œéå¸¸çš„ç›´è§‚ã€‚ä½†æ˜¯åœ¨extensionä¸­æ˜¯æ²¡æ³•æ›´æ–°UIçš„ï¼Œæœ‰ä¸€ç§å®ç°æ–¹å¼ï¼Œå¯ä»¥ç”¨å¼€æºæ¡†æ¶<a href="https://github.com/mutualmobile/MMWormhole" target="_blank" rel="noopener">MMWormhole</a>æ¥å®ç°APPä¸extensioné€šä¿¡ï¼Œç„¶åæŠŠè¿›åº¦ä»extensionä¼ åˆ°APPä¸­ï¼Œåœ¨APPä¸­æ›´æ–°è¿›åº¦æ¡ã€‚ç†è®ºä¸Šè¯¥æ–¹æ¡ˆæ˜¯å¯è¡Œçš„ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å°è¯•ä¸‹ã€‚</p><hr><ul><li>å‚è€ƒé“¾æ¥<br><a href="https://developer.apple.com/documentation/callkit" target="_blank" rel="noopener">https://developer.apple.com/documentation/callkit</a><br><a href="https://developer.apple.com/videos/play/wwdc2016/230/" target="_blank" rel="noopener">https://developer.apple.com/videos/play/wwdc2016/230/</a><br><a href="https://colin1994.github.io/2016/06/17/Call-Directory-Extension-Study/" target="_blank" rel="noopener">https://colin1994.github.io/2016/06/17/Call-Directory-Extension-Study/</a><br><a href="https://yunissong.github.io/2017/03/29/CallKit/" target="_blank" rel="noopener">https://yunissong.github.io/2017/03/29/CallKit/</a><br><a href="http://www.jianshu.com/p/7f88cbe7948c" target="_blank" rel="noopener">http://www.jianshu.com/p/7f88cbe7948c</a><br><a href="https://www.raywenderlich.com/150015/callkit-tutorial-ios" target="_blank" rel="noopener">https://www.raywenderlich.com/150015/callkit-tutorial-ios</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;æœ€è¿‘éœ€è¦å®ç°ä¸€ä¸ªæ–°éœ€æ±‚ï¼Œç”¨iOS 10å‡ºçš„CallKitå®ç°å°†APPçš„é€šè®¯å½•çš„ä¿¡æ¯åŒæ­¥åˆ°ç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä¸æŠŠäººå‘˜ä¿¡æ¯åŠ 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>iOSçš„Cookieç®¡ç†</title>
    <link href="http://crmo.github.io/2018/03/01/iOS%E7%9A%84Cookie%E7%AE%A1%E7%90%86/"/>
    <id>http://crmo.github.io/2018/03/01/iOSçš„Cookieç®¡ç†/</id>
    <published>2018-03-01T12:00:00.000Z</published>
    <updated>2018-03-03T10:14:03.915Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/1.jpeg" alt=""></p><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æœ€è¿‘æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦æ‰‹åŠ¨çš„å»ç¼“å­˜cookieï¼Œç„¶åå¯åŠ¨APPçš„æ—¶å€™è®¾ç½®ç¼“å­˜è¿‡çš„cookieï¼Œé¡¹ç›®ç½‘ç»œæ¡†æ¶ç”¨çš„æ˜¯Afnetworkingã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>ç¿»äº†ä¸‹Afnetworkingçš„issueï¼Œå‘ç°äº†ä½œè€…å¯¹äºcookieçš„è§£é‡Š</p><blockquote><p>Afnetworkingæ²¡æœ‰å¯¹Cookieåšè¿‡å¤„ç†</p></blockquote><p><img src="/images/2.jpg" alt=""></p><p>ä½¿ç”¨<code>NSHTTPCookieStorage</code>å³å¯å®ç°cookieçš„ç®¡ç†ã€‚ä¸Šä»£ç ï¼</p><p><strong>å­˜cookie</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSArray *cookies = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookiesForURL:[NSURL URLWithString:url]];</span><br><span class="line">NSData *data = [NSKeyedArchiver archivedDataWithRootObject:cookies];</span><br><span class="line">NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];</span><br><span class="line">[userDefaults setObject:data forKey:@&quot;cookie&quot;];</span><br></pre></td></tr></table></figure><p><strong>è®¾ç½®cookie</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">NSData *cookiesdata = [[NSUserDefaults standardUserDefaults] objectForKey:@&quot;m3cookie&quot;];</span><br><span class="line">    if([cookiesdata length]) &#123;</span><br><span class="line">        NSArray *cookies = [NSKeyedUnarchiver unarchiveObjectWithData:cookiesdata];</span><br><span class="line">        NSHTTPCookie *cookie;</span><br><span class="line">        for (cookie in cookies) &#123;</span><br><span class="line">            [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>æ¸…ç†cookie</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSHTTPCookie *cookie;</span><br><span class="line">NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];</span><br><span class="line">for (cookie in [storage cookies]) &#123;</span><br><span class="line">    [storage deleteCookie:cookie];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>å‚è€ƒæ–‡ç« ï¼š</p><blockquote><p><a href="https://developer.apple.com/documentation/foundation/nshttpcookiestorage" target="_blank" rel="noopener">NSHTTPCookieStorageå®˜æ–¹æ–‡æ¡£</a><br><a href="https://stackoverflow.com/questions/4597763/persisting-cookies-in-an-ios-application/8713316#8713316" target="_blank" rel="noopener">Persisting Cookies In An iOS Application?</a><br><a href="https://stackoverflow.com/questions/21625313/clear-cookies-for-response-in-afnetworking-2" target="_blank" rel="noopener">Clear cookies for response in AFNetworking 2</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;/images/1.jpeg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h2&gt;&lt;p&gt;æœ€è¿‘æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦æ‰‹åŠ¨çš„å»ç¼“å­˜cookieï¼Œç„¶åå¯åŠ¨AP
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>imageNamedä¸imageWithContentsOfFileå°ç»“</title>
    <link href="http://crmo.github.io/2018/03/01/imageNamed%E4%B8%8EimageWithContentsOfFile%E5%B0%8F%E7%BB%93/"/>
    <id>http://crmo.github.io/2018/03/01/imageNamedä¸imageWithContentsOfFileå°ç»“/</id>
    <published>2018-03-01T11:30:00.000Z</published>
    <updated>2018-03-03T10:13:41.036Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/3.jpg" alt=""></p><blockquote><p>æœ¬æ–‡ä¸»è¦è®²imageNamedä¸imageWithContentsOfFileçš„å·®å¼‚ï¼Œéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œä¸å®æˆ˜ä¸­é‡åˆ°çš„å‘ã€‚</p></blockquote><p>å¥½ä¹…æ²¡å†™è¿‡åšå®¢äº†ï¼Œä»€ä¹ˆå·¥ä½œå¤ªå¿™ï¼ŒåŠ ç­å¤ªæ™šæˆ‘å°±ä¸è¯´äº†ï¼Œéƒ½æ€ªè‡ªå·±å¤ªæ‡’ğŸ˜‚ï¼Œæ—¶é—´éƒ½æ˜¯æŒ¤å‡ºæ¥çš„ã€‚çœ‹ç€å„ä½å¤§ç‰›å†™çš„æ–‡ç« ï¼Œç®€ç›´è¿‡ç˜¾ï¼Œå¸Œæœ›æœ‰ä¸€å¤©è‡ªå·±ä¹Ÿèƒ½å†™å‡ºè¿™ä¹ˆé«˜è´¨é‡ã€å¹²è´§å¯†é›†çš„æ–‡ç« ï¼Œå…ˆä»ç®€å•çš„åšèµ·å§ã€‚</p><h2 id="ä»å·®å¼‚è¯´èµ·"><a href="#ä»å·®å¼‚è¯´èµ·" class="headerlink" title="ä»å·®å¼‚è¯´èµ·"></a>ä»å·®å¼‚è¯´èµ·</h2><p>ä»ç£ç›˜åŠ è½½å›¾ç‰‡ï¼ŒUIImageä¸»è¦æä¾›äº†ä¸¤ç§æ–¹å¼ï¼š</p><blockquote><p>+(UIImage <em>)imageNamed:(NSString </em>)name;<br>+(UIImage <em>)imageWithContentsOfFile:(NSString </em>)path;</p></blockquote><p>å…³äºè¿™ä¸¤ç§æ–¹æ³•çš„ä½¿ç”¨æ—¶æœºï¼Œè‹¹æœå®˜æ–¹æ–‡æ¡£æè¿°å¦‚ä¸‹ï¼š</p><blockquote><p>Use the imageNamed:inBundle:compatibleWithTraitCollection: method (or the imageNamed: method) to create an image from an image asset or image file located in your appâ€™s main bundle (or some other known bundle). Because these methods cache the image data automatically, they are especially recommended for images that you use frequently.<br>Use the imageWithContentsOfFile: or initWithContentsOfFile: method to create an image object where the initial data is not in a bundle. These methods load the image data from disk each time, so you should not use them to load the same image repeatedly.</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>imageNamed:</code>ç¬¬ä¸€æ¬¡åŠ è½½å›¾ç‰‡æ—¶ä¼šç¼“å­˜å›¾ç‰‡åˆ°å†…å­˜ï¼Œé€‚åˆä½¿ç”¨é¢‘ç¹çš„å›¾ç‰‡ï¼Œ<code>imageWithContentsOfFile:</code>ä¸ä¼šæŠŠå›¾ç‰‡ç¼“å­˜åˆ°å†…å­˜ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½è¦é‡æ–°ä»ç£ç›˜åŠ è½½ä¸€æ¬¡ã€‚<br>åœ¨å®é™…ä½¿ç”¨ä¸­æˆ‘ä»¬è¦æ ¹æ®ä¸šåŠ¡æ¥åˆ¤æ–­è°ƒç”¨å…·ä½“çš„æ–¹æ³•ï¼Œæ¥æœ€ä¼˜åŒ–å†…å­˜ä¸æ€§èƒ½ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p><ol><li>ç™»é™†èƒŒæ™¯å›¾ï¼Œåªä¼šåœ¨ç”¨æˆ·ç™»é™†çš„æ—¶å€™ä½¿ç”¨ï¼Œè€Œä¸”å›¾ç‰‡è¾ƒå¤§ï¼Œå°±å»ºè®®ç”¨<code>imageWithContentsOfFile:</code>åŠ è½½ï¼›</li><li>åº•å¯¼èˆªå›¾æ ‡ï¼Œå›¾æ ‡è¾ƒå°ï¼Œä½¿ç”¨é¢‘ç¹ï¼Œå°±å»ºè®®ä½¿ç”¨<code>imageNamed:</code>åŠ è½½ï¼›</li></ol><blockquote><p><code>imageNamed:</code>æ–¹æ³•è¿˜æœ‰ä¸ªé™åˆ¶ï¼Œå®ƒæ˜¯åœ¨main bundleé‡Œæ‰¾å›¾ç‰‡ï¼Œå¦‚æœå›¾ç‰‡æ”¾åœ¨<code>Images.xcassets</code>æˆ–è€…ç›´æ¥æŠŠå›¾ç‰‡æ–¹åœ¨å·¥ç¨‹é‡Œï¼Œå‚æ•°ç›´æ¥ä¼ å›¾ç‰‡åå¯ä»¥æ‰¾åˆ°ã€‚åƒæˆ‘å¸çš„å›¾ç‰‡æ˜¯æ”¾åœ¨å•ç‹¬å»ºç«‹çš„bundleé‡Œï¼Œå¦‚æœè¦ç”¨<code>imageNamed:</code>åŠ è½½çš„è¯æ–‡ä»¶åå‰é¢å°±è¦åŠ ä¸Šbundleåï¼Œåƒè¿™æ ·<code>a.bundle/b.png</code>ã€‚</p></blockquote><h2 id="å±å¹•é€‚é…é—®é¢˜"><a href="#å±å¹•é€‚é…é—®é¢˜" class="headerlink" title="å±å¹•é€‚é…é—®é¢˜"></a>å±å¹•é€‚é…é—®é¢˜</h2><p>iOSçš„å›¾ç‰‡æ–‡ä»¶éœ€è¦æä¾›3ç§å°ºå¯¸çš„1xã€2xã€3xï¼Œæ ¹æ®ä¸åŒçš„å±å¹•å°ºå¯¸æˆ‘ä»¬éœ€è¦åŠ è½½ä¸åŒçš„å›¾ç‰‡ï¼Œå…³äºä¸åŒå±å¹•çš„å›¾ç‰‡åŠ è½½ï¼Œè‹¹æœå·²ç»å¸®æˆ‘ä»¬å°è£…å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å°†3ä¸­å°ºå¯¸çš„å›¾ç‰‡æ”¾åˆ°å·¥ç¨‹ä¸­ï¼Œç„¶åè°ƒç”¨<code>imageNamed:</code>æˆ–è€…<code>imageWithContentsOfFile:</code>ï¼Œå®ƒä¼šè‡ªåŠ¨æ ¹æ®å±å¹•å°ºå¯¸æ¥åŠ è½½ä¸åŒçš„å›¾ç‰‡ã€‚<br>å…³äº<code>imageNamed:</code>ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­æœ‰è¿™ä¹ˆä¸€æ®µè®¨è®ºï¼š</p><blockquote><p>This method looks in the system caches for an image object with the specified name and returns the variant of that image that is best suited for the main screen. </p></blockquote><p><code>imageWithContentsOfFile:</code>è¿˜æ²¡æ‰¾åˆ°å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼ˆå¦‚æœå„ä½çŸ¥é“ï¼Œæ¬¢è¿å„ä½å¤§ç‰›åœ¨è¯„è®ºä¸­æå‡ºï¼‰ï¼Œä¸è¿‡æˆ‘æµ‹è¯•è¿‡æ˜¯å¯ä»¥çš„ã€‚</p><h2 id="ä½¿ç”¨imageWithContentsOfFileçš„ä¸€ä¸ªå‘"><a href="#ä½¿ç”¨imageWithContentsOfFileçš„ä¸€ä¸ªå‘" class="headerlink" title="ä½¿ç”¨imageWithContentsOfFileçš„ä¸€ä¸ªå‘"></a>ä½¿ç”¨imageWithContentsOfFileçš„ä¸€ä¸ªå‘</h2><p>åœ¨ä½¿ç”¨<code>imageWithContentsOfFile:</code>åŠ è½½å›¾ç‰‡çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªå‘ï¼Œå…ˆä¸Šä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+ (UIImage *)imageWithName:(NSString *)name type:(NSString *)type inBundle:(NSString *)bundle &#123;</span><br><span class="line">    NSString *imageBundlePath = [[NSBundle mainBundle] pathForResource:bundle ofType:@&quot;bundle&quot;];</span><br><span class="line">    NSBundle *imageBundle = [NSBundle bundleWithPath:imageBundlePath];</span><br><span class="line">    NSString *imagePath = [imageBundle pathForResource:name ofType:type];</span><br><span class="line">    UIImage *image = [UIImage imageWithContentsOfFile:imagePath];</span><br><span class="line">    return image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾ˆç®€å•çš„ä¸€ä¸ªå‡½æ•°ï¼Œå°±æ˜¯è·å–bundleå…¨è·¯å¾„ï¼Œç„¶åå†è·å–åˆ°bundleé‡Œå›¾ç‰‡çš„å…¨è·¯å¾„ï¼Œç„¶åè°ƒç”¨<code>imageWithContentsOfFile:</code>åŠ è½½å›¾ç‰‡ã€‚åœ¨ä½¿ç”¨çš„æ—¶å€™ä¹Ÿå¾ˆæ­£å¸¸ï¼Œä½†æ˜¯æœ‰ä¸€å¤©å‘ç°æŸå¼ å›¾åŠ è½½ä¸å‡ºæ¥äº†ã€‚æ£€æŸ¥èµ„æºæ–‡ä»¶ï¼Œåªæœ‰2xçš„å›¾ï¼ˆåˆæ˜¯ä¸€ä¸ªå·æ‡’çš„ç¨‹åºå‘˜ã€‚ã€‚ã€‚å¾ˆä¸å»ºè®®è¿™ä¹ˆç©ï¼Œè™½ç„¶åªæœ‰2xçš„å›¾ï¼Œåœ¨æ‰€æœ‰å±å¹•éƒ½èƒ½æ˜¾ç¤ºï¼Œä½†æ˜¯ä¼šé€ æˆå›¾ç‰‡çš„å‹ç¼©ä¸æ”¾å¤§ï¼Œæ¯ä¸ªç»†èŠ‚éƒ½å¾ˆé‡è¦ï¼ï¼ï¼ï¼‰ï¼Œå¦‚æœåŠ ä¸Š1xçš„å›¾å°±å¯ä»¥åŠ è½½å‡ºæ¥äº†ã€‚<br>ç»è¿‡è°ƒè¯•å‘ç°é—®é¢˜å°±å‡ºåœ¨<code>pathForResource:ofType</code>ä¸Šï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ç²¾ç¡®åŒ¹é…è°ƒç”¨è€…è¾“å…¥çš„æ–‡ä»¶åï¼Œä¸ä¼šè‡ªåŠ¨è¯†åˆ«æ–‡ä»¶ååé¢çš„<code>@2x</code>ã€‚ä¿®æ”¹åçš„ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+ (UIImage *)imageWithName:(NSString *)name type:(NSString *)type inBundle:(NSString *)bundle &#123;</span><br><span class="line">    NSString *imageBundlePath = [[NSBundle mainBundle] pathForResource:bundle ofType:@&quot;bundle&quot;];</span><br><span class="line">    NSBundle *imageBundle = [NSBundle bundleWithPath:imageBundlePath];</span><br><span class="line">    NSString *imageFullName = [name stringByAppendingPathExtension:type];</span><br><span class="line">    NSString *imagePath = [[imageBundle resourcePath] stringByAppendingPathComponent:imageFullName];</span><br><span class="line">    UIImage *image = [UIImage imageWithContentsOfFile:imagePath];</span><br><span class="line">    return image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;/images/3.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦è®²imageNamedä¸imageWithContentsOfFileçš„å·®å¼‚ï¼Œéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œä¸å®æˆ˜ä¸­é‡åˆ°çš„å‘ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¥½ä¹…æ²¡
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼ç¬”è®°</title>
    <link href="http://crmo.github.io/2016/11/20/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AC%94%E8%AE%B0/"/>
    <id>http://crmo.github.io/2016/11/20/æ­£åˆ™è¡¨è¾¾å¼ç¬”è®°/</id>
    <published>2016-11-20T15:44:53.000Z</published>
    <updated>2018-03-03T10:12:48.914Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ­£åˆ™è¡¨è¾¾å¼ï¼ˆregular expressionï¼‰æè¿°äº†ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å¼ï¼Œå¯ä»¥ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªä¸²æ˜¯å¦å«æœ‰æŸç§å­ä¸²ã€å°†åŒ¹é…çš„å­—ä¸²åšæ›¿æ¢æˆ–è€…ä»æŸä¸ªä¸²ä¸­å–å‡ºç¬¦åˆæŸä¸ªæ¡ä»¶çš„å­—ä¸²ç­‰ã€‚</p></blockquote><p>æ­£åˆ™è¡¨è¾¾å¼åœ¨çº¿æµ‹è¯•ï¼š<br><a href="http://www.regexpal.com/" target="_blank" rel="noopener">http://www.regexpal.com/</a></p><h2 id="å…ƒå­—ç¬¦"><a href="#å…ƒå­—ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦"></a>å…ƒå­—ç¬¦</h2><p>å¸¸ç”¨å…ƒå­—ç¬¦ï¼š</p><table><thead><tr><th style="text-align:center">ä»£ç </th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">.</td><td style="text-align:center">åŒ¹é…é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦</td></tr><tr><td style="text-align:center">\w</td><td style="text-align:center">åŒ¹é…å­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿æˆ–æ±‰å­—</td></tr><tr><td style="text-align:center">\d</td><td style="text-align:center">åŒ¹é…æ•°å­—</td></tr><tr><td style="text-align:center">\s</td><td style="text-align:center">åŒ¹é…ç©ºæ ¼</td></tr><tr><td style="text-align:center">\b</td><td style="text-align:center">åŒ¹é…å•è¯çš„å¼€å§‹æˆ–ç»“æŸ</td></tr><tr><td style="text-align:center">^</td><td style="text-align:center">åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œå¦‚æœæ˜¯å¤„ç†å¤šè¡Œï¼Œæ„ä¹‰å˜æˆè¡Œå¼€å§‹å¤„</td></tr><tr><td style="text-align:center">$</td><td style="text-align:center">åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸï¼Œå¦‚æœæ˜¯å¤„ç†å¤šè¡Œï¼Œæ„ä¹‰å˜æˆè¡Œç»“æŸå¤„</td></tr></tbody></table><h2 id="é™å®šç¬¦"><a href="#é™å®šç¬¦" class="headerlink" title="é™å®šç¬¦"></a>é™å®šç¬¦</h2><p>å¸¸ç”¨é™å®šç¬¦ï¼š</p><table><thead><tr><th style="text-align:center">ä»£ç </th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">*</td><td style="text-align:center">*å‰é¢çš„å†…å®¹é‡å¤ä»»æ„æ¬¡</td></tr><tr><td style="text-align:center">+</td><td style="text-align:center">+å‰é¢çš„å†…å®¹é‡å¤ä¸€æ¬¡æˆ–è€…å¤šæ¬¡</td></tr><tr><td style="text-align:center">?</td><td style="text-align:center">é‡å¤é›¶æ¬¡æˆ–ä¸€æ¬¡</td></tr><tr><td style="text-align:center">{n}</td><td style="text-align:center">é‡å¤næ¬¡</td></tr><tr><td style="text-align:center">{n, }</td><td style="text-align:center">é‡å¤æ¬¡æ•°å¤§äºç­‰äºn</td></tr><tr><td style="text-align:center">{n,m}</td><td style="text-align:center">é‡å¤æ¬¡æ•°å¤§äºç­‰äºnå°äºç­‰äºm</td></tr></tbody></table><h2 id="å­—ç¬¦ç±»"><a href="#å­—ç¬¦ç±»" class="headerlink" title="å­—ç¬¦ç±»"></a>å­—ç¬¦ç±»</h2><p>[auiou] åŒ¹é…ä»»ä½•ä¸€ä¸ªè‹±æ–‡å…ƒéŸ³å­—æ¯<br>[.?!] åŒ¹é…æ ‡ç‚¹ç¬¦å·ï¼ˆ.  ?   !ï¼‰</p><h2 id="åä¹‰"><a href="#åä¹‰" class="headerlink" title="åä¹‰"></a>åä¹‰</h2><table><thead><tr><th style="text-align:center">ä»£ç </th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">\W</td><td style="text-align:center">åŒ¹é…ä»»æ„ä¸æ˜¯å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€æ±‰å­—çš„å­—ç¬¦</td></tr><tr><td style="text-align:center">\S</td><td style="text-align:center">åŒ¹é…ä»»æ„ä¸æ˜¯ç©ºç™½ç¬¦çš„å­—ç¬¦</td></tr><tr><td style="text-align:center">\D</td><td style="text-align:center">åŒ¹é…ä»»æ„éæ•°å­—çš„å­—ç¬¦</td></tr><tr><td style="text-align:center">\B</td><td style="text-align:center">åŒ¹é…ä¸æ˜¯å•è¯å¼€å¤´æˆ–ç»“æŸçš„ä½ç½®</td></tr><tr><td style="text-align:center">[^x]</td><td style="text-align:center">åŒ¹é…é™¤äº†xä»¥å¤–çš„ä»»æ„å­—ç¬¦</td></tr><tr><td style="text-align:center">[^abcd]</td><td style="text-align:center">åŒ¹é…é™¤äº†abcdä»¥å¤–çš„ä»»æ„å­—ç¬¦</td></tr></tbody></table><h2 id="åˆ†ç»„"><a href="#åˆ†ç»„" class="headerlink" title="åˆ†ç»„"></a>åˆ†ç»„</h2><table><thead><tr><th style="text-align:center">ä»£ç </th><th style="text-align:center">è¯´æ˜ã€€</th></tr></thead><tbody><tr><td style="text-align:center">(exp)</td><td style="text-align:center">åŒ¹é…expï¼Œå¹¶æ•è·æ–‡æœ¬åˆ°è‡ªåŠ¨å‘½åç»„ä¸­</td></tr><tr><td style="text-align:center"><code>(?&lt;name&gt;exp)</code></td><td style="text-align:center">åŒ¹é…exp,å¹¶æ•è·æ–‡æœ¬åˆ°åç§°ä¸ºnameçš„ç»„é‡Œï¼Œä¹Ÿå¯ä»¥å†™æˆ(?`name`exp)</td></tr><tr><td style="text-align:center">(?:exp)</td><td style="text-align:center">åŒ¹é…expï¼Œä¸æ•è·åŒ¹é…çš„æ–‡æœ¬ï¼Œä¹Ÿä¸ç»™æ¬¡åˆ†ç»„åˆ†é…ç»„å·</td></tr><tr><td style="text-align:center">(?=exp)</td><td style="text-align:center">åŒ¹é…expå‰é¢çš„ä½ç½®</td></tr><tr><td style="text-align:center">(?&lt;=exp)</td><td style="text-align:center">åŒ¹é…expåé¢çš„ä½ç½®</td></tr><tr><td style="text-align:center">(?!exp)</td><td style="text-align:center">åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯expçš„ä½ç½®</td></tr><tr><td style="text-align:center">(?&lt;!exp)</td><td style="text-align:center">åŒ¹é…å‰é¢ä¸æ˜¯expçš„ä½ç½®</td></tr><tr><td style="text-align:center">(?#comment)</td><td style="text-align:center">æ³¨é‡Š</td></tr></tbody></table><h2 id="è´ªå©ªä¸æ‡’æƒ°"><a href="#è´ªå©ªä¸æ‡’æƒ°" class="headerlink" title="è´ªå©ªä¸æ‡’æƒ°"></a>è´ªå©ªä¸æ‡’æƒ°</h2><p>é€šå¸¸é‡å¤é™å®šç¬¦çš„è¡Œä¸ºæ˜¯<strong>åŒ¹é…å°½å¯èƒ½å¤š</strong>çš„å­—ç¬¦ï¼Œåœ¨é™å®šç¬¦åé¢åŠ <code>?</code>ä½¿ä¹‹æˆä¸ºæƒ°æ€§é™å®šç¬¦ï¼Œä¾‹å¦‚<code>*?</code>çš„å«ä¹‰ä¸º<strong>é‡å¤ä»»æ„æ¬¡æ•°ï¼Œä½†æ˜¯å°½å¯èƒ½å°‘</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;æ­£åˆ™è¡¨è¾¾å¼ï¼ˆregular expressionï¼‰æè¿°äº†ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å¼ï¼Œå¯ä»¥ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªä¸²æ˜¯å¦å«æœ‰æŸç§å­ä¸²ã€å°†åŒ¹é…çš„å­—ä¸²åšæ›¿æ¢æˆ–è€…ä»æŸä¸ªä¸²ä¸­å–å‡ºç¬¦åˆæŸä¸ªæ¡ä»¶çš„å­—ä¸²ç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ­£åˆ™è¡¨è¾¾å¼åœ¨çº¿æµ‹è¯•ï¼š&lt;br&gt;&lt;a
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Golangç¼–ç è§„èŒƒ</title>
    <link href="http://crmo.github.io/2016/11/20/Golang%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/"/>
    <id>http://crmo.github.io/2016/11/20/Golangç¼–ç è§„èŒƒ/</id>
    <published>2016-11-20T14:33:54.000Z</published>
    <updated>2018-03-04T07:54:21.742Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>gofmt</p><p>å¤§éƒ¨åˆ†çš„æ ¼å¼é—®é¢˜å¯ä»¥é€šè¿‡gofmtè§£å†³ï¼Œgofmtè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼Œä¿è¯æ‰€æœ‰çš„goä»£ç ä¸å®˜æ–¹æ¨èçš„æ ¼å¼ä¿æŒä¸€è‡´ï¼Œäºæ˜¯æ‰€æœ‰æ ¼å¼æœ‰å…³é—®é¢˜ï¼Œéƒ½ä»¥gofmtçš„ç»“æœä¸ºå‡†ã€‚</p></li><li><p>è¡Œé•¿</p></li></ul><p>ä¸€è¡Œæœ€é•¿ä¸è¶…è¿‡80ä¸ªå­—ç¬¦ï¼Œè¶…è¿‡çš„ä½¿ç”¨æ¢è¡Œå±•ç¤ºï¼Œå°½é‡ä¿æŒæ ¼å¼ä¼˜é›…ã€‚</p><ul><li><p>æ³¨é‡Š</p><p>åœ¨ç¼–ç é˜¶æ®µåº”è¯¥åŒæ­¥å†™å¥½å˜é‡ã€å‡½æ•°ã€åŒ…çš„æ³¨é‡Šï¼Œæœ€åå¯ä»¥åˆ©ç”¨godocå¯¼å‡ºæ–‡æ¡£ã€‚æ³¨é‡Šå¿…é¡»æ˜¯å®Œæ•´çš„å¥å­ï¼Œå¥å­çš„ç»“å°¾åº”è¯¥ç”¨å¥å·ä½œä¸ºç»“å°¾ï¼ˆè‹±æ–‡å¥å·ï¼‰ã€‚æ³¨é‡Šæ¨èç”¨è‹±æ–‡ï¼Œå¯ä»¥åœ¨å†™ä»£ç è¿‡ç¨‹ä¸­é”»ç‚¼è‹±æ–‡çš„é˜…è¯»å’Œä¹¦å†™èƒ½åŠ›ã€‚è€Œä¸”ç”¨è‹±æ–‡ä¸ä¼šå‡ºç°å„ç§ç¼–ç çš„é—®é¢˜ã€‚<br>æ¯ä¸ªåŒ…éƒ½åº”è¯¥æœ‰ä¸€ä¸ªåŒ…æ³¨é‡Šï¼Œä¸€ä¸ªä½äºpackageå­å¥ä¹‹å‰çš„å—æ³¨é‡Šæˆ–è¡Œæ³¨é‡Šã€‚åŒ…å¦‚æœæœ‰å¤šä¸ªgoæ–‡ä»¶ï¼Œåªéœ€è¦å‡ºç°åœ¨ä¸€ä¸ªgoæ–‡ä»¶ä¸­å³å¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// pingåŒ…å®ç°äº†å¸¸ç”¨çš„pingç›¸å…³çš„å‡½æ•°</span><br><span class="line">package ping</span><br></pre></td></tr></table></figure></li></ul><p>å¯¼å‡ºå‡½æ•°æ³¨é‡Šï¼Œç¬¬ä¸€æ¡è¯­å¥åº”è¯¥ä¸ºä¸€æ¡æ¦‚æ‹¬è¯­å¥ï¼Œå¹¶ä¸”ä½¿ç”¨è¢«å£°æ˜çš„åå­—ä½œä¸ºå¼€å¤´ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// æ±‚aå’Œbçš„å’Œï¼Œè¿”å›sumã€‚</span><br><span class="line">func Myfunction(sum int) (a, b int) &#123;</span><br></pre></td></tr></table></figure><ul><li><p>å‘½å</p><ul><li>éœ€è¦æ³¨é‡Šæ¥è¡¥å……çš„å‘½åå°±ä¸ç®—æ˜¯å¥½å‘½åã€‚<ul><li>ä½¿ç”¨å¯æœç´¢çš„åç§°ï¼šå•å­—æ¯åç§°å’Œæ•°å­—å¸¸é‡å¾ˆéš¾ä»ä¸€å¤§å †æ–‡å­—ä¸­æœç´¢å‡ºæ¥ã€‚å•å­—æ¯åç§°ä»…é€‚ç”¨äºçŸ­æ–¹æ³•ä¸­çš„æœ¬åœ°å˜é‡ï¼Œåç§°é•¿çŸ­åº”ä¸å…¶ä½œç”¨åŸŸç›¸å¯¹åº”ã€‚è‹¥å˜é‡æˆ–å¸¸é‡å¯èƒ½åœ¨ä»£ç ä¸­å¤šå¤„ä½¿ç”¨ï¼Œåˆ™åº”èµ‹å…¶ä»¥ä¾¿äºæœç´¢çš„åç§°ã€‚</li><li>åšæœ‰æ„ä¹‰çš„åŒºåˆ†ï¼šProductå’ŒProductInfoå’ŒProductDataæ²¡æœ‰åŒºåˆ«ï¼ŒNameStringå’ŒNameæ²¡æœ‰åŒºåˆ«ï¼Œè¦åŒºåˆ†åç§°ï¼Œå°±è¦ä»¥è¯»è€…èƒ½é‰´åˆ«ä¸åŒä¹‹å¤„çš„æ–¹å¼æ¥åŒºåˆ† ã€‚</li></ul></li><li>å‡½æ•°å‘½åè§„åˆ™ï¼šé©¼å³°å¼å‘½åï¼Œåå­—å¯ä»¥é•¿ä½†æ˜¯å¾—æŠŠåŠŸèƒ½ï¼Œå¿…è¦çš„å‚æ•°æè¿°æ¸…æ¥šï¼Œå‡½æ•°åååº”å½“æ˜¯åŠ¨è¯æˆ–åŠ¨è¯çŸ­è¯­ï¼Œå¦‚postPaymentã€deletePageã€saveã€‚å¹¶ä¾Javabeanæ ‡å‡†åŠ ä¸Šgetã€setã€iså‰ç¼€ã€‚ä¾‹å¦‚ï¼šxxx + With + éœ€è¦çš„å‚æ•°å + And + éœ€è¦çš„å‚æ•°å + â€¦..</li><li>ç»“æ„ä½“å‘½åè§„åˆ™ï¼šç»“æ„ä½“ååº”è¯¥æ˜¯åè¯æˆ–åè¯çŸ­è¯­ï¼Œå¦‚Customeã€WikiPageã€Accountã€AddressParserï¼Œé¿å…ä½¿ç”¨Managerã€Processorã€Dataã€Infoã€è¿™æ ·çš„ç±»åï¼Œç±»åä¸åº”å½“æ˜¯åŠ¨è¯ã€‚<ul><li>åŒ…åå‘½åè§„åˆ™ï¼šåŒ…ååº”è¯¥ä¸ºå°å†™å•è¯ï¼Œä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿æˆ–è€…æ··åˆå¤§å°å†™ã€‚</li><li>æ¥å£å‘½åè§„åˆ™ï¼šå•ä¸ªå‡½æ•°çš„æ¥å£åä»¥â€erâ€ä½œä¸ºåç¼€ï¼Œå¦‚Reader,Writerã€‚æ¥å£çš„å®ç°åˆ™å»æ‰â€œerâ€ã€‚</li></ul></li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type Reader interface &#123;</span><br><span class="line">        Read(p []byte) (n int, err error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸¤ä¸ªå‡½æ•°çš„æ¥å£åç»¼åˆä¸¤ä¸ªå‡½æ•°å<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type WriteFlusher interface &#123;</span><br><span class="line">    Write([]byte) (int, error)</span><br><span class="line">    Flush() error</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p> ä¸‰ä¸ªä»¥ä¸Šå‡½æ•°çš„æ¥å£åï¼ŒæŠ½è±¡è¿™ä¸ªæ¥å£çš„åŠŸèƒ½ï¼Œç±»ä¼¼äºç»“æ„ä½“å<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Car interface &#123;</span><br><span class="line">    Start([]byte)</span><br><span class="line">    Stop() error</span><br><span class="line">    Recover()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li>å¸¸é‡</li></ul><p>å¸¸é‡å‡éœ€ä½¿ç”¨å…¨éƒ¨å¤§å†™å­—æ¯ç»„æˆï¼Œå¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†è¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const APP_VER = &quot;1.0&quot;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯æšä¸¾ç±»å‹çš„å¸¸é‡ï¼Œéœ€è¦å…ˆåˆ›å»ºç›¸åº”ç±»å‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type Scheme string</span><br><span class="line"></span><br><span class="line">const (</span><br><span class="line">    HTTP  Scheme = &quot;http&quot;</span><br><span class="line">    HTTPS Scheme = &quot;https&quot;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å¦‚æœæ¨¡å—çš„åŠŸèƒ½è¾ƒä¸ºå¤æ‚ã€å¸¸é‡åç§°å®¹æ˜“æ··æ·†çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†æ›´å¥½åœ°åŒºåˆ†æšä¸¾ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨å®Œæ•´çš„å‰ç¼€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type PullRequestStatus int</span><br><span class="line"></span><br><span class="line">const (</span><br><span class="line">    PULL_REQUEST_STATUS_CONFLICT PullRequestStatus = iota</span><br><span class="line">    PULL_REQUEST_STATUS_CHECKING</span><br><span class="line">    PULL_REQUEST_STATUS_MERGEABLE</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li><p>å˜é‡</p><p>å˜é‡å‘½ååŸºæœ¬ä¸Šéµå¾ªç›¸åº”çš„è‹±æ–‡è¡¨è¾¾æˆ–ç®€å†™,åœ¨ç›¸å¯¹ç®€å•çš„ç¯å¢ƒï¼ˆå¯¹è±¡æ•°é‡å°‘ã€é’ˆå¯¹æ€§å¼ºï¼‰ä¸­ï¼Œå¯ä»¥å°†ä¸€äº›åç§°ç”±å®Œæ•´å•è¯ç®€å†™ä¸ºå•ä¸ªå­—æ¯ï¼Œä¾‹å¦‚ï¼š</p><ul><li>user å¯ä»¥ç®€å†™ä¸º u</li><li>userID å¯ä»¥ç®€å†™ uid<br>è‹¥å˜é‡ç±»å‹ä¸º bool ç±»å‹ï¼Œåˆ™åç§°åº”ä»¥ Has, Is, Can æˆ– Allow å¼€å¤´ï¼š</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var isExist bool</span><br><span class="line">var hasConflict bool</span><br><span class="line">var canManage bool</span><br><span class="line">var allowGitHook bool</span><br></pre></td></tr></table></figure><ul><li><p>å˜é‡å‘½åæƒ¯ä¾‹</p><p>å˜é‡åç§°ä¸€èˆ¬éµå¾ªé©¼å³°æ³•ï¼Œä½†é‡åˆ°ç‰¹æœ‰åè¯æ—¶ï¼Œéœ€è¦éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p><ul><li>å¦‚æœå˜é‡ä¸ºç§æœ‰ï¼Œä¸”ç‰¹æœ‰åè¯ä¸ºé¦–ä¸ªå•è¯ï¼Œåˆ™ä½¿ç”¨å°å†™ï¼Œå¦‚ apiClient</li><li>å…¶å®ƒæƒ…å†µéƒ½åº”å½“ä½¿ç”¨è¯¥åè¯åŸæœ‰çš„å†™æ³•ï¼Œå¦‚ APIClientã€repoIDã€UserID</li><li>é”™è¯¯ç¤ºä¾‹ï¼šUrlArrayï¼Œåº”è¯¥å†™æˆurlArrayæˆ–è€…URLArray</li></ul><p>ä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›å¸¸è§çš„ç‰¹æœ‰åè¯ï¼š</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">// A GonicMapper that contains a list of common initialisms taken from golang/lint</span><br><span class="line">var LintGonicMapper = GonicMapper&#123;</span><br><span class="line">    &quot;API&quot;:   true,</span><br><span class="line">    &quot;ASCII&quot;: true,</span><br><span class="line">    &quot;CPU&quot;:   true,</span><br><span class="line">    &quot;CSS&quot;:   true,</span><br><span class="line">    &quot;DNS&quot;:   true,</span><br><span class="line">    &quot;EOF&quot;:   true,</span><br><span class="line">    &quot;GUID&quot;:  true,</span><br><span class="line">    &quot;HTML&quot;:  true,</span><br><span class="line">    &quot;HTTP&quot;:  true,</span><br><span class="line">    &quot;HTTPS&quot;: true,</span><br><span class="line">    &quot;ID&quot;:    true,</span><br><span class="line">    &quot;IP&quot;:    true,</span><br><span class="line">    &quot;JSON&quot;:  true,</span><br><span class="line">    &quot;LHS&quot;:   true,</span><br><span class="line">    &quot;QPS&quot;:   true,</span><br><span class="line">    &quot;RAM&quot;:   true,</span><br><span class="line">    &quot;RHS&quot;:   true,</span><br><span class="line">    &quot;RPC&quot;:   true,</span><br><span class="line">    &quot;SLA&quot;:   true,</span><br><span class="line">    &quot;SMTP&quot;:  true,</span><br><span class="line">    &quot;SSH&quot;:   true,</span><br><span class="line">    &quot;TLS&quot;:   true,</span><br><span class="line">    &quot;TTL&quot;:   true,</span><br><span class="line">    &quot;UI&quot;:    true,</span><br><span class="line">    &quot;UID&quot;:   true,</span><br><span class="line">    &quot;UUID&quot;:  true,</span><br><span class="line">    &quot;URI&quot;:   true,</span><br><span class="line">    &quot;URL&quot;:   true,</span><br><span class="line">    &quot;UTF8&quot;:  true,</span><br><span class="line">    &quot;VM&quot;:    true,</span><br><span class="line">    &quot;XML&quot;:   true,</span><br><span class="line">    &quot;XSRF&quot;:  true,</span><br><span class="line">    &quot;XSS&quot;:   true,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>structè§„èŒƒ</li></ul><p>structç”³æ˜å’Œåˆå§‹åŒ–æ ¼å¼é‡‡ç”¨å¤šè¡Œï¼š</p><p>å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type User struct&#123;</span><br><span class="line">    Username  string</span><br><span class="line">    Email     string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">u := User&#123;</span><br><span class="line">    Username: &quot;test&quot;,</span><br><span class="line">    Email:    &quot;test@gmail.com&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>æ§åˆ¶ç»“æ„</p><p>if<br>ifæ¥å—åˆå§‹åŒ–è¯­å¥ï¼Œçº¦å®šå¦‚ä¸‹æ–¹å¼å»ºç«‹å±€éƒ¨å˜é‡</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if err := file.Chmod(0664); err != nil &#123;</span><br><span class="line">    return err</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> for<br>é‡‡ç”¨çŸ­å£°æ˜å»ºç«‹å±€éƒ¨å˜é‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sum := 0</span><br><span class="line">for i := 0; i &lt; 10; i++ &#123;</span><br><span class="line">    sum += i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> return<br>å°½æ—©returnï¼šä¸€æ—¦æœ‰é”™è¯¯å‘ç”Ÿï¼Œé©¬ä¸Šè¿”å›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">f, err := os.Open(name)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    return err</span><br><span class="line">&#125;</span><br><span class="line">d, err := f.Stat()</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    f.Close()</span><br><span class="line">    return err</span><br><span class="line">&#125;</span><br><span class="line">codeUsing(f, d)</span><br></pre></td></tr></table></figure><ul><li><p>é”™è¯¯å¤„ç†</p><ul><li>errorä½œä¸ºå‡½æ•°çš„å€¼è¿”å›,å¿…é¡»å¯¹errorè¿›è¡Œå¤„ç†</li><li>é”™è¯¯æè¿°å¦‚æœæ˜¯è‹±æ–‡å¿…é¡»ä¸ºå°å†™ï¼Œä¸éœ€è¦æ ‡ç‚¹ç»“å°¾</li><li>é‡‡ç”¨ç‹¬ç«‹çš„é”™è¯¯æµè¿›è¡Œå¤„ç†</li></ul><p>ä¸è¦é‡‡ç”¨ä¸‹é¢çš„å¤„ç†é”™è¯¯å†™æ³•</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if err != nil &#123;</span><br><span class="line">    // error handling</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    // normal code</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> é‡‡ç”¨ä¸‹é¢çš„å†™æ³•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if err != nil &#123;</span><br><span class="line">    // error handling</span><br><span class="line">    return // or continue, etc.</span><br><span class="line">&#125;</span><br><span class="line">// normal code</span><br></pre></td></tr></table></figure><p> ä½¿ç”¨å‡½æ•°çš„è¿”å›å€¼æ—¶ï¼Œåˆ™é‡‡ç”¨ä¸‹é¢çš„æ–¹å¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x, err := f()</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    // error handling</span><br><span class="line">    return</span><br><span class="line">&#125;</span><br><span class="line">// use x</span><br></pre></td></tr></table></figure><ul><li>panic</li></ul><p>å°½é‡ä¸è¦ä½¿ç”¨panicï¼Œé™¤éä½ çŸ¥é“ä½ åœ¨åšä»€ä¹ˆ</p><ul><li>import</li></ul><p>å¯¹importçš„åŒ…è¿›è¡Œåˆ†ç»„ç®¡ç†ï¼Œç”¨æ¢è¡Œç¬¦åˆ†å‰²ï¼Œè€Œä¸”æ ‡å‡†åº“ä½œä¸ºåˆ†ç»„çš„ç¬¬ä¸€ç»„ã€‚å¦‚æœä½ çš„åŒ…å¼•å…¥äº†ä¸‰ç§ç±»å‹çš„åŒ…ï¼Œæ ‡å‡†åº“åŒ…ï¼Œç¨‹åºå†…éƒ¨åŒ…ï¼Œç¬¬ä¸‰æ–¹åŒ…ï¼Œå»ºè®®é‡‡ç”¨å¦‚ä¸‹æ–¹å¼è¿›è¡Œç»„ç»‡ä½ çš„åŒ…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">    &quot;fmt&quot;</span><br><span class="line">    &quot;os&quot;</span><br><span class="line"></span><br><span class="line">    &quot;kmg/a&quot;</span><br><span class="line">    &quot;kmg/b&quot;</span><br><span class="line"></span><br><span class="line">    &quot;code.google.com/a&quot;</span><br><span class="line">    &quot;github.com/b&quot;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p> åœ¨é¡¹ç›®ä¸­ä¸è¦ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•å…¥åŒ…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// é”™è¯¯ç¤ºä¾‹</span><br><span class="line">import â€œ../netâ€</span><br><span class="line"></span><br><span class="line">// æ­£ç¡®çš„åšæ³•</span><br><span class="line">import â€œgithub.com/repo/proj/src/netâ€</span><br></pre></td></tr></table></figure><p>goimportsä¼šè‡ªåŠ¨å¸®ä½ æ ¼å¼åŒ–</p><ul><li><p>å‚æ•°ä¼ é€’</p><ul><li>å¯¹äºå°‘é‡æ•°æ®ï¼Œä¸è¦ä¼ é€’æŒ‡é’ˆ</li><li>å¯¹äºå¤§é‡æ•°æ®çš„structå¯ä»¥è€ƒè™‘ä½¿ç”¨æŒ‡é’ˆ</li><li>ä¼ å…¥å‚æ•°æ˜¯mapï¼Œsliceï¼Œchanä¸è¦ä¼ é€’æŒ‡é’ˆï¼Œå› ä¸ºmapï¼Œsliceï¼Œchanæ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸éœ€è¦ä¼ é€’æŒ‡é’ˆçš„æŒ‡é’ˆ</li></ul></li><li><p>å•å…ƒæµ‹è¯•</p></li></ul><p>å•å…ƒæµ‹è¯•æ–‡ä»¶åå‘½åè§„èŒƒä¸º example_test.go<br>æµ‹è¯•ç”¨ä¾‹çš„å‡½æ•°åç§°å¿…é¡»ä»¥ Test å¼€å¤´ï¼Œä¾‹å¦‚ï¼šTestExample</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;p&gt;gofmt&lt;/p&gt;
&lt;p&gt;å¤§éƒ¨åˆ†çš„æ ¼å¼é—®é¢˜å¯ä»¥é€šè¿‡gofmtè§£å†³ï¼Œgofmtè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼Œä¿è¯æ‰€æœ‰çš„goä»£ç ä¸å®˜æ–¹æ¨èçš„æ ¼å¼ä¿æŒä¸€è‡´ï¼Œäºæ˜¯æ‰€æœ‰æ ¼å¼æœ‰å…³é—®é¢˜ï¼Œéƒ½ä»¥gofmtçš„ç»“æœä¸ºå‡†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;è¡Œé•¿&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
      
    
    </summary>
    
    
  </entry>
  
</feed>
